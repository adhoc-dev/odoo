<?xml version="1.0" encoding="utf-8"?>
<odoo>

   <template id="partner_info" name="Argentinan partner">

        <!-- show document type -->
        <div t-attf-class="form-group #{error.get('l10n_latam_identification_type_id') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label" for="l10n_latam_identification_type_id">Tipo de Documento</label>
            <select name="l10n_latam_identification_type_id" t-attf-class="form-control #{error.get('l10n_latam_identification_type_id') and 'is-invalid' or ''}" t-att-readonly="None if partner.can_edit_vat() else '1'" t-att-title="None if partner.can_edit_vat() else 'Changing Identification type is not allowed once document(s) have been issued for your account. Please contact us directly for this operation.'" >
                <option value="">Tipo de Documento...</option>
                <t t-foreach="identification_types or []" t-as="id_type">
                    <option t-att-value="id_type.id" t-att-selected="id_type.id == int(identification) if identification else id_type.id == partner.l10n_latam_identification_type_id.id">
                        <t t-esc="id_type.name"/>
                    </option>
                </t>
            </select>
        </div>

        <!-- show afip responsibility -->
        <div t-attf-class="form-group #{error.get('l10n_ar_afip_responsibility_type_id') and 'o_has_error' or ''} col-xl-6">
            <label class="col-form-label" for="l10n_ar_afip_responsibility_type_id">Responsabilidad AFIP</label>
            <select name="l10n_ar_afip_responsibility_type_id" t-attf-class="form-control #{error.get('l10n_ar_afip_responsibility_type_id') and 'is-invalid' or ''}" t-att-readonly="None if partner.can_edit_vat() else '1'" t-att-title="None if partner.can_edit_vat() else 'Changing AFIP Responsibility type is not allowed once document(s) have been issued for your account. Please contact us directly for this operation.'" >
                <option value="">Responsabilidad AFIP...</option>
                <t t-foreach="responsibility_types or []" t-as="resp_type">
                    <option t-att-value="resp_type.id" t-att-selected="resp_type.id == int(responsibility) if responsibility else resp_type.id == partner.l10n_ar_afip_responsibility_type_id.id">
                        <t t-esc="resp_type.name"/>
                    </option>
                </t>
            </select>
        </div>

    </template>

    <template id="portal_my_details" name="portal_my_details" inherit_id="portal.portal_my_details">
        <xpath expr="//input[@name='vat']/.." position="before">

        <!-- TODO testing, delete after confirm everything is ok

            <t t-esc="'res_company'"/>
            <t t-esc="res_company"/>

            <t t-esc="'website'"/>
            <t t-esc="website"/>

            <t t-esc="'website.company_id'"/>
            <t t-esc="website.company_id"/>

            <t t-esc="'website_sale'"/>
            <t t-esc="website_sale"/>

        res_company = res.company(4,)
        website = website(3,)
        website.company_id = res.company(4,)
        website_sale =  -->

        <t t-if="res_company.country_id == env.ref('base.ar')">
            <t t-call="l10n_ar_website_sale.partner_info"/>
        </t>
        </xpath>
    </template>

    <template id="address_b2b" inherit_id="website_sale.address_b2b">
        <xpath expr="//input[@name='vat']/.." position="before">
            <t t-if="mode[1] == 'billing'" positon="inside">
                <t t-if="res_company.country_id == env.ref('base.ar')">
                    <t t-set="partner" value="website_sale_order.partner_id"/>
                </t>
            </t>
        </xpath>
    </template>

</odoo>
